{% extends "base.html" %} {% block page_content %}

<div class="container mt-4">
  <h2 class="mb-4">Manage Users</h2>

  <div class="mb-3">
    <p>Total Users: <strong>{{ total_users }}</strong></p>
  </div>

  {% if users %}
  <table class="table table-bordered table-striped align-middle">
    <thead class="table-light">
      <tr>
        <th>Username</th>
        <th>Date Joined</th>
        <th>Role</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for user in users %}
      <tr>
        <td>{{ user.username }}</td>
        <td>{{ user.date_joined|date:"Y-m-d H:i" }}</td>
        <td>
          {% if user.is_superuser %}
          <span class="badge bg-danger">Superuser</span>
          {% elif user.is_staff %}
          <span class="badge bg-warning text-dark">Staff</span>
          {% else %}
          <span class="badge bg-secondary">Normal User</span>
          {% endif %}
        </td>
        <td>
          {% if not user.is_superuser %}
          <a
            href="{% url 'promote_user' user.pk %}"
            class="btn btn-sm btn-outline-primary">
            Promote to Superuser
          </a>
          {% else %}
          <span class="text-muted">â€”</span>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <div class="alert alert-info">No users found.</div>
  {% endif %}
</div>

{% endblock page_content %}
