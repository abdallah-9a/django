{% extends "base.html" %}
{% load static %}
{% block page_content %}

<h2 class="mb-4">{{ category.name }}</h2>

{% if posts %}
  {% for post in posts %}
    <div class="card mb-4">
      <div class="card-body d-flex">
        <!-- Left side: text content -->
        <div class="flex-grow-1 pe-3">
          <h5 class="card-title">{{ post.title }}</h5>
          <h6 class="card-subtitle text-muted mb-2">
            by {{ post.author }} â€¢ {{ post.publish_date }}
          </h6>
          <p class="card-text">{{ post.content|truncatewords:40 }}</p>

          {% if post.tags.exists %}
          <div class="mt-2">
            <strong>Tags:</strong>
            {% for tag in post.tags.all %}
              <span class="badge bg-secondary">{{ tag.name }}</span>
            {% endfor %}
          </div>
          {% endif %}

          <a
            href="{% url 'post_details' post.id %}"
            class="btn btn-sm btn-outline-primary mt-3"
          >Read More</a>
        </div>

        <!-- Right side: image -->
        {% if post.pic %}
          <div>
            <img src="{% static 'images/'|add:post.pic %}" alt="{{ post.title }}" width="150" class="img-fluid rounded" />
          </div>
        {% endif %}
      </div>
    </div>
  {% endfor %}
{% else %}
  <p>No posts in this category.</p>
{% endif %}

{% endblock page_content %}
