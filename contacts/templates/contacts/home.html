{% extends 'base.html' %} {% block title %}Contacts - Contacts Manager
{%endblock%} {% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h3 fw-bold mb-0">Contacts</h1>
  {% if user.is_authenticated %}
  <a href="{% url 'add_contact' %}" class="btn btn-primary btn-sm"
    >Add Contact</a
  >
  {% endif %}
</div>
<div class="table-responsive">
  <table class="table table-striped table-hover align-middle">
    <thead class="table-dark">
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Email</th>
        <th scope="col">Phone</th>
        <th scope="col">Created At</th>
        <th scope="col" class="text-center">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for c in contacts %}
      <tr>
        <td>{{ c.username }}</td>
        <td><a href="mailto:{{ c.email }}">{{ c.email }}</a></td>
        <td>{{ c.phone|default:'-' }}</td>
        <td>{{ c.created_at|date:'Y-m-d H:i' }}</td>
        <td class="text-center">
          <div class="d-flex justify-content-center gap-2">
            <a
              href="{% url 'edit_contact' c.pk %}"
              class="btn btn-sm btn-primary"
              title="Edit">
              Edit
            </a>
            <form
              method="post"
              action="{% url 'delete_contact' c.pk %}"
              onsubmit="return confirm('Delete this contact?');"
              class="m-0 p-0">
              {% csrf_token %}
              <button
                type="submit"
                class="btn btn-sm btn-danger"
                title="Delete">
                Delete
              </button>
            </form>
          </div>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5" class="text-center text-muted">No contacts yet.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
