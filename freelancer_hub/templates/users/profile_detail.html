{% extends 'base.html' %} {% block title %}
{{profile.get_full_name|default:profile.username }} | Profile{% endblock %}
{%block content %}
<div class="row justify-content-center">
  <div class="col-lg-8 col-xl-7">
    <div class="d-flex align-items-center mb-3">
      {% if profile.avatar %}
      <img
        src="{{ profile.avatar.url }}"
        alt="Avatar"
        class="rounded-circle me-3"
        width="72"
        height="72" />
      {% else %}
      <div
        class="rounded-circle bg-secondary text-white d-flex justify-content-center align-items-center me-3"
        style="width: 72px; height: 72px; font-size: 1.5rem">
        {{ profile.username|first|upper }}
      </div>
      {% endif %}
      <div>
        <h1 class="h5 mb-1">
          {{ profile.get_full_name|default:profile.username }}
        </h1>
        <div class="text-muted small">@{{ profile.username }}</div>
      </div>
    </div>

    {% if profile.bio %}
    <p class="mb-4">{{ profile.bio }}</p>
    {% else %}
    <p class="text-muted">No bio provided.</p>
    {% endif %}

    <dl class="row small">
      <dt class="col-sm-3">Email</dt>
      <dd class="col-sm-9">{{ profile.email|default:'-' }}</dd>
      <dt class="col-sm-3">Resume</dt>
      <dd class="col-sm-9">
        {% if profile.resume %}
        <a href="{{ profile.resume.url }}" target="_blank">Download</a>
        {% else %}
        <span class="text-muted">Not provided</span>
        {% endif %}
      </dd>
      <dt class="col-sm-3">Phone</dt>
      <dd class="col-sm-9">{{ profile.phone_number|default:'-' }}</dd>
      <dt class="col-sm-3">Location</dt>
      <dd class="col-sm-9">{{ profile.location|default:'-' }}</dd>
      <dt class="col-sm-3">Joined</dt>
      <dd class="col-sm-9">{{ profile.date_joined|date:'M d, Y' }}</dd>
      <dt class="col-sm-3">Last login</dt>
      <dd class="col-sm-9">
        {{ profile.last_login|date:'M d, Y H:i'|default:'-' }}
      </dd>
    </dl>

    {% if user.is_authenticated and user.pk == profile.pk %}
    <a
      href="{% url 'profile_edit' profile.pk %}"
      class="btn btn-sm btn-outline-primary"
      >Edit Profile</a
    >
    {% endif %}
    <hr class="my-4" />
    <h2 class="h6 mb-3">Projects</h2>
    {% with profile.projects.all as projects %} {% if projects %}
    <ul class="list-unstyled small mb-0">
      {% for project in projects %}
      <li class="mb-2">
        <a href="{% url 'project_detail' project.pk %}">{{ project.title }}</a>
        <span class="text-muted"
          >- {{ project.deadline|date:'M d, Y' }}{% if not project.status %}
          (Closed){% endif %}</span
        >
      </li>
      {% endfor %}
    </ul>
    {% else %}
    <p class="text-muted small mb-0">No projects yet.</p>
    {% endif %} {% endwith %}
  </div>
</div>
{% endblock %}
